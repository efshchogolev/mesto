(()=>{"use strict";var __webpack_modules__={174:()=>{eval('\n;// CONCATENATED MODULE: ./src/components/Card.js\nclass Card {\n  constructor(\n    config,\n    card,\n    handleCardClick,\n    deleteCardFromServer,\n    userId,\n    handleUpdateCardLikes\n  ) {\n    this._config = config;\n    this._card = card;\n    this._name = card.name;\n    this._link = card.link;\n    this._handleCardClick = handleCardClick;\n    this._deleteCardFromServer = deleteCardFromServer;\n    this._handleUpdateCardLikes = handleUpdateCardLikes;\n    this._userId = userId;\n    this._likes = this._card.likes;\n  }\n\n  _getTemplate() {\n    return document\n      .querySelector(this._config.placeTemplate)\n      .content.children[0].cloneNode(true);\n  }\n\n  _addEventListeners() {\n    this._view\n      .querySelector(this._config.cardDeleteButton)\n      .addEventListener("click", (evt) => {\n        this._deleteCard(this._card);\n      });\n    this._placeImage.addEventListener("click", () => {\n      this._handleCardClick(this._name, this._link);\n    });\n    this._likeButton.addEventListener("click", () => {\n      this._handleUpdateCardLikes(this._card._id, this._isLiked(), this);\n    });\n  }\n\n  _deleteCard() {\n    this._deleteCardFromServer(this._card._id, this);\n  }\n\n  submitDeleteCard() {\n    this._view.remove();\n    this._view = null;\n  }\n\n  _checkOwner(template) {\n    if (this._userId !== this._card.owner._id) {\n      template.querySelector(this._config.cardDeleteButton).style.display =\n        "none";\n    }\n    return template;\n  }\n\n  _isLiked() {\n    return this._likes.some((like) => like._id === this._userId);\n  }\n\n  _updateLikesView() {\n    this._cardLikeCount.textContent = this._likes.length;\n    this._likeButton.classList.toggle(\n      this._config.cardLikeActiveClass,\n      this._isLiked()\n    );\n  }\n\n  updateLikes(likes) {\n    console.log(this._likes);\n    this._likes = likes;\n    console.log(this._likes);\n    this._updateLikesView();\n  }\n\n  render() {\n    this._view = this._checkOwner(this._getTemplate());\n    this._placeName = this._view.querySelector(this._config.cardName);\n    this._placeName.textContent = this._name;\n    this._placeImage = this._view.querySelector(this._config.cardImage);\n    this._placeImage.src = this._link;\n    this._placeImage.alt = this._name;\n    this._likeButton = this._view.querySelector(this._config.cardLikeButton);\n    this._cardLikeCount = this._view.querySelector(this._config.cardLikes);\n    this._updateLikesView();\n    this._addEventListeners();\n\n    return this._view;\n  }\n}\n\n/* harmony default export */ const components_Card = (Card);\n\n;// CONCATENATED MODULE: ./src/components/FormValidator.js\nclass FormValidator {\n  constructor(config, formElement) {\n    this._formElement = formElement;\n    this._inputElement = config.inputSelector;\n    this._submitButtonSelector = config.submitButtonSelector;\n    this._submitButtonElement = formElement.querySelector(\n      this._submitButtonSelector\n    );\n    this._inputErrorClass = config.inputErrorClass;\n    this._errorClass = config.errorClass;\n    this._inputList = Array.from(\n      this._formElement.querySelectorAll(this._inputElement)\n    );\n  }\n\n  _activateError(inputElement) {\n    this._errorElement = this._formElement.querySelector(\n      `.${inputElement.id}-error`\n    );\n    inputElement.classList.add(this._inputErrorClass);\n    this._errorElement.textContent = inputElement.validationMessage;\n    this._errorElement.classList.add(this._errorClass);\n  }\n\n  _disableError(inputElement) {\n    this._errorElement = this._formElement.querySelector(\n      `.${inputElement.id}-error`\n    );\n    inputElement.classList.remove(this._inputErrorClass);\n    this._errorElement.classList.remove(this._errorClass);\n    this._errorElement.textContent = "";\n  }\n\n  _checkInputValidity(inputElement) {\n    if (!inputElement.validity.valid) {\n      this._activateError(inputElement);\n    } else {\n      this._disableError(inputElement);\n    }\n  }\n\n  _deactivateButton() {\n    if (this._submitButtonElement) {\n      this._submitButtonElement.setAttribute("disabled", true);\n    }\n  }\n\n  _activateButton() {\n    if (this._submitButtonElement) {\n      this._submitButtonElement.removeAttribute("disabled", true);\n    }\n  }\n\n  _toggleButtonState() {\n    if (this._hasInvalidInput(this._inputList)) {\n      this._deactivateButton(this._submitButtonElement);\n    } else {\n      this._activateButton(this._submitButtonElement);\n    }\n  }\n\n  _setEventListeners() {\n    this._inputList.forEach((inputElement) => {\n      inputElement.addEventListener("input", () => {\n        this._checkInputValidity(inputElement);\n        this._toggleButtonState();\n      });\n    });\n  }\n\n  enableValidation() {\n    this._setEventListeners();\n  }\n\n  _hasInvalidInput() {\n    return this._inputList.some((inputElement) => {\n      return !inputElement.validity.valid;\n    });\n  }\n\n  resetValidation() {\n    this._toggleButtonState();\n    this._inputList.forEach((inputElement) => {\n      this._disableError(inputElement);\n    });\n  }\n}\n\n/* harmony default export */ const components_FormValidator = (FormValidator);\n\n;// CONCATENATED MODULE: ./src/components/Section.js\nclass Section {\n  constructor({ renderer }, containerSelector) {\n    this._renderer = renderer;\n    this._container = document.querySelector(containerSelector);\n  }\n\n  addItem(element) {\n    this._container.prepend(element);\n  }\n\n  renderItems(items) {\n    items.forEach((item) => {\n      this._renderer(item);\n    });\n  }\n}\n\n/* harmony default export */ const components_Section = (Section);\n\n;// CONCATENATED MODULE: ./src/components/Popup.js\nclass Popup {\n  constructor(popupSelector) {\n    this._popupElement = document.querySelector(popupSelector);\n    this._closeButtonElement = this._popupElement.querySelector(\n      ".popup__close-button"\n    );\n    this._handleEscClose = this._handleEscClose.bind(this);\n  }\n  open() {\n    this._popupElement.classList.add("popup_isOpen");\n    document.addEventListener("keydown", this._handleEscClose);\n  }\n\n  close() {\n    this._popupElement.classList.remove("popup_isOpen");\n    document.removeEventListener("keydown", this._handleEscClose);\n  }\n\n  _handleEscClose(evt) {\n    if (evt.key === "Escape") {\n      this.close();\n    }\n  }\n\n  _handleButtonClick() {\n    if (this._popupElement.classList.contains("popup_isOpen")) {\n      this.close();\n    }\n  }\n\n  setEventListeners() {\n    this._closeButtonElement.addEventListener("click", () => {\n      this._handleButtonClick();\n    });\n    this._popupElement.addEventListener("mousedown", (evt) => {\n      if (evt.target.classList.contains("popup_isOpen")) {\n        this.close();\n      }\n    });\n  }\n}\n/* harmony default export */ const components_Popup = (Popup);\n\n;// CONCATENATED MODULE: ./src/components/PopupWithImage.js\n\nclass PopupWithImage extends components_Popup {\n  constructor(popupSelector) {\n    super(popupSelector);\n    this._imageElement = this._popupElement.querySelector(\n      ".popup__place-image"\n    );\n    this._nameElement = this._popupElement.querySelector(".popup__place-name");\n  }\n  open(placeName, placeLink) {\n    super.open();\n    this._imageElement.setAttribute("src", placeLink);\n    this._nameElement.textContent = placeName;\n    this._imageElement.setAttribute("alt", placeName);\n  }\n}\n\n/* harmony default export */ const components_PopupWithImage = (PopupWithImage);\n\n;// CONCATENATED MODULE: ./src/components/PopupWithForm.js\n\nclass PopupWithForm extends components_Popup {\n  constructor(popupSelector, handleFormSubmit, handleRenderLoading) {\n    super(popupSelector);\n    this._formElement = this._popupElement.querySelector(".popup__form");\n    this._inputs = this._formElement.querySelectorAll(".popup__input");\n    this._handleFormSubmit = handleFormSubmit;\n    this._submitButton = this._formElement.querySelector(\n      ".popup__submit-button"\n    );\n    this._handleRenderLoading = handleRenderLoading;\n  }\n\n  _getInputValues() {\n    const inputValues = {};\n    this._inputs.forEach((item) => {\n      inputValues[item.name] = item.value;\n    });\n    return inputValues;\n  }\n\n  setEventListeners() {\n    super.setEventListeners();\n    this._formElement.addEventListener("submit", (evt) => {\n      evt.preventDefault();\n      this._handleFormSubmit(this._getInputValues());\n    });\n  }\n\n  toggleLoader(isLoading) {\n    if (isLoading) {\n      this._submitButton.textContent = "Сохранение...";\n    } else {\n      if (this._submitButton.classList.contains("popup__submit-button_add")) {\n        this._submitButton.textContent = "Создать";\n      } else {\n        this._submitButton.textContent = "Сохранить";\n      }\n    }\n  }\n\n  close() {\n    super.close();\n    this._formElement.reset();\n  }\n}\n\n/* harmony default export */ const components_PopupWithForm = (PopupWithForm);\n\n;// CONCATENATED MODULE: ./src/components/PopupWithSubmit.js\n\n\nclass PopupWithSubmit extends components_Popup {\n  constructor(popupSelector, handleFormDelete) {\n    super(popupSelector);\n    this._handleFormDelete = handleFormDelete;\n    this._formElement = this._popupElement.querySelector(".popup__form");\n    this._submitButton = this._formElement.querySelector(\n      ".popup__submit-button"\n    );\n  }\n\n  setEventListeners() {\n    super.setEventListeners();\n    this._submitButton.addEventListener("click", (evt) => {\n      evt.preventDefault();\n      this._handleFormDelete(this._getCardData());\n    });\n  }\n\n  open(id, card) {\n    super.open();\n    this._cardData = {};\n    this._cardData.id = id;\n    this._cardData.card = card;\n  }\n\n  _getCardData() {\n    return this._cardData;\n  }\n}\n\n/* harmony default export */ const components_PopupWithSubmit = (PopupWithSubmit);\n\n;// CONCATENATED MODULE: ./src/components/UserInfo.js\nclass UserInfo {\n  constructor({ nameSelector, aboutSelector, avatarSelector }) {\n    this._name = document.querySelector(nameSelector);\n    this._about = document.querySelector(aboutSelector);\n    this._avatar = document.querySelector(avatarSelector);\n    this._id;\n  }\n\n  getUserInfo() {\n    const userData = {};\n    userData.name = this._name.textContent;\n    userData.about = this._about.textContent;\n    return userData;\n  }\n  setUserInfo({ name, about, avatar, _id }) {\n    this._name.textContent = name;\n    this._about.textContent = about;\n    this._avatar.src = avatar;\n    this._id = _id;\n  }\n}\n\n/* harmony default export */ const components_UserInfo = (UserInfo);\n\n;// CONCATENATED MODULE: ./src/utils/constants.js\nconst btnEdit = document.querySelector(".profile__edit-button");\nconst popupEditSelector = "#popup_edit";\n\nconst popupDeleteSelector = "#popup_delete";\n\nconst popupAvatarSelector = "#popup_avatar";\nconst btnAvatar = document.querySelector(".profile__avatar");\nconst formAvatar = document.querySelector("#form_avatar");\n\nconst nameSelector = ".profile__name";\nconst nameInput = document.querySelector(".popup__input_name");\nconst aboutSelector = ".profile__about";\nconst avatarSelector = ".profile__avatar";\nconst aboutInput = document.querySelector(".popup__input_about");\nconst formEdit = document.querySelector("#form_edit");\n\nconst btnAdd = document.querySelector(".profile__add-button");\nconst popupAddSelector = "#popup_add";\nconst formAdd = document.querySelector("#form_add");\nconst placeNameInputElement = document.querySelector(\n  ".popup__input_place"\n);\nconst placeImgLinkElement = document.querySelector(".popup__input_link");\nconst placePopupSelector = "#popup_place";\n\nconst config = {\n  placeTemplate: ".place-template",\n  cardName: ".place__name",\n  cardImage: ".place__image",\n  cardLikes: ".place__like-count",\n  cardList: ".elements",\n  cardDeleteButton: ".place__delete-button",\n  cardLikeButton: ".place__like-button",\n  cardLikeActiveClass: "place__like-button_active",\n  host: "https://mesto.nomoreparties.co/v1/cohort-47",\n  token: "ad5a4fe9-6249-4900-9757-39fd298866ec",\n};\n\nconst validation = {\n  formSelector: ".popup__form",\n  inputSelector: ".popup__input",\n  submitButtonSelector: ".popup__submit-button",\n  inputErrorClass: "popup__input_error",\n  errorClass: "popup__input-error_active",\n};\n\n;// CONCATENATED MODULE: ./src/components/Api.js\nclass Api {\n  constructor(host, token) {\n    this._host = host;\n    this._token = token;\n\n    this._getJsonOrError = this._getJsonOrError.bind(this);\n    this._getHeaders = this._getHeaders.bind(this);\n  }\n\n  _getJsonOrError(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  _getHeaders() {\n    return {\n      authorization: this._token,\n      "content-type": "application/json",\n    };\n  }\n\n  getCards() {\n    return fetch(`${this._host}/cards`, {\n      headers: this._getHeaders(),\n    }).then(this._getJsonOrError);\n  }\n\n  getUserInfoFromServer() {\n    return fetch(`${this._host}/users/me`, {\n      headers: this._getHeaders(),\n    }).then(this._getJsonOrError);\n  }\n\n  createCard(card) {\n    return fetch(`${this._host}/cards`, {\n      method: "POST",\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name: card.name,\n        link: card.link,\n      }),\n    }).then(this._getJsonOrError);\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._host}/cards/${id}`, {\n      method: "DELETE",\n      headers: this._getHeaders(),\n    }).then(this._getJsonOrError);\n  }\n\n  updateUserInfo({ name, about }) {\n    return fetch(`${this._host}/users/me`, {\n      method: "PATCH",\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then(this._getJsonOrError);\n  }\n\n  updateUserAvatar(link) {\n    return fetch(`${this._host}/users/me/avatar`, {\n      method: "PATCH",\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        avatar: link,\n      }),\n    }).then(this._getJsonOrError);\n  }\n\n  setLike(id) {\n    return fetch(`${this._host}/cards/${id}/likes`, {\n      method: "PUT",\n      headers: this._getHeaders(),\n    }).then(this._getJsonOrError);\n  }\n\n  deleteLike(id) {\n    return fetch(`${this._host}/cards/${id}/likes`, {\n      method: "DELETE",\n      headers: this._getHeaders(),\n    }).then(this._getJsonOrError);\n  }\n}\n\n/* harmony default export */ const components_Api = (Api);\n\n;// CONCATENATED MODULE: ./src/pages/index.js\n\n\n\n\n\n\n\n\n\n\n\nlet userId;\n\nconst api = new components_Api(config.host, config.token);\n\nfunction handlerFormEditSubmit(inputs) {\n  popupEdit.toggleLoader(true);\n\n  api\n    .updateUserInfo(inputs)\n    .then((data) => {\n      userInfo.setUserInfo(data);\n    })\n    .then(() => popupEdit.close())\n    .catch((err) => console.log(err))\n    .finally(() => {\n      popupEdit.toggleLoader(false);\n    });\n}\n\nconst handlerPlaceSubmit = (inputs) => {\n  popupAdd.toggleLoader(true);\n  api\n    .createCard(inputs)\n    .then((item) => {\n      renderCard(item);\n    })\n    .then(() => {\n      popupAdd.close();\n    })\n    .catch((err) => console.log(err))\n    .finally(() => {\n      popupAdd.toggleLoader(false);\n    });\n};\n\nfunction handleAvatarSubmit(inputs) {\n  popupAvatar.toggleLoader(true);\n  api\n    .updateUserAvatar(inputs.link)\n    .then((avatar) => {\n      userInfo.setUserInfo(avatar);\n    })\n    .then(() => {\n      popupAvatar.close();\n    })\n    .catch((err) => console.log(err))\n    .finally(() => {\n      popupAvatar.toggleLoader(false);\n    });\n}\n\nconst userInfo = new components_UserInfo({\n  nameSelector: nameSelector,\n  aboutSelector: aboutSelector,\n  avatarSelector: avatarSelector,\n});\n\nfunction handleFormDelete(cardData) {\n  api\n    .deleteCard(cardData.id)\n    .then(cardData.card.submitDeleteCard())\n    .then(popupSubmit.close())\n    .catch((err) => console.log(err));\n}\n\nfunction openDeletePopup(id, card) {\n  popupSubmit.open(id, card);\n}\n\nconst handleCardClick = (placeName, placeLink) => {\n  placePopup.open(placeName, placeLink);\n};\n\nfunction handleUpdateCardLikes(id, isLiked, card) {\n  if (!isLiked) {\n    api.setLike(id).then((res) => {\n      card.updateLikes(res.likes);\n    });\n  } else {\n    api.deleteLike(id).then((res) => {\n      card.updateLikes(res.likes);\n    });\n  }\n}\n\nfunction createCard(item) {\n  const place = new components_Card(\n    config,\n    item,\n    handleCardClick,\n    openDeletePopup,\n    userId,\n    handleUpdateCardLikes\n  );\n  const cardElement = place.render();\n  return cardElement;\n}\n\nconst renderCard = (item) => {\n  const cardElement = createCard(item);\n  cardList.addItem(cardElement);\n};\n\nconst cardList = new components_Section(\n  {\n    renderer: renderCard,\n  },\n  config.cardList\n);\n\nbtnEdit.addEventListener("click", function () {\n  popupEdit.open();\n\n  const userData = userInfo.getUserInfo();\n  nameInput.value = userData.name;\n  aboutInput.value = userData.about;\n  formEditValidation.resetValidation();\n});\n\nbtnAdd.addEventListener("click", function () {\n  popupAdd.open();\n  formAddValidation.resetValidation();\n});\n\nbtnAvatar.addEventListener("click", function () {\n  popupAvatar.open();\n  formAvatarValidation.resetValidation();\n});\n\nconst popupSubmit = new components_PopupWithSubmit(popupDeleteSelector, handleFormDelete);\npopupSubmit.setEventListeners();\n\nconst popupAvatar = new components_PopupWithForm(popupAvatarSelector, handleAvatarSubmit);\npopupAvatar.setEventListeners();\n\nconst popupEdit = new components_PopupWithForm(popupEditSelector, handlerFormEditSubmit);\npopupEdit.setEventListeners();\nconst popupAdd = new components_PopupWithForm(popupAddSelector, handlerPlaceSubmit);\npopupAdd.setEventListeners();\n\nconst formEditValidation = new components_FormValidator(validation, formEdit);\nformEditValidation.enableValidation();\nconst formAddValidation = new components_FormValidator(validation, formAdd);\nformAddValidation.enableValidation();\nconst formAvatarValidation = new components_FormValidator(validation, formAvatar);\nformAvatarValidation.enableValidation();\n\nconst placePopup = new components_PopupWithImage(placePopupSelector);\nplacePopup.setEventListeners();\n\nPromise.all([api.getUserInfoFromServer(), api.getCards()])\n  .then(([user, cards]) => {\n    userId = user._id;\n    userInfo.setUserInfo(user);\n\n    cardList.renderItems(cards);\n  })\n  .catch((err) => console.log(err));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZUFBZTtBQUNqQjs7QUFFQSx3QkFBd0I7QUFDeEI7O0FBRUE7QUFDQSxFQUFFLGVBQWU7QUFDakIsRUFBRSxnQkFBZ0I7QUFDbEI7QUFDQSxDQUFDOztBQUVELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLENBQUM7O0FBRUQsd0JBQXdCLDBCQUFlLENBQUMsbUJBQW1CO0FBQzNEOztBQUVBLHdCQUF3Qix3QkFBYSxDQUFDLG1CQUFtQjtBQUN6RDs7QUFFQSxzQkFBc0Isd0JBQWEsQ0FBQyxpQkFBaUI7QUFDckQ7QUFDQSxxQkFBcUIsd0JBQWEsQ0FBQyxnQkFBZ0I7QUFDbkQ7O0FBRUEsK0JBQStCLHdCQUFhLENBQUMsVUFBVSxFQUFFLFFBQVE7QUFDakU7QUFDQSw4QkFBOEIsd0JBQWEsQ0FBQyxVQUFVLEVBQUUsT0FBTztBQUMvRDtBQUNBLGlDQUFpQyx3QkFBYSxDQUFDLFVBQVUsRUFBRSxVQUFVO0FBQ3JFOztBQUVBLHVCQUF1Qix5QkFBYyxDQUFDLGtCQUFrQjtBQUN4RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcz80MTJkIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcz85MjFlIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcz9jZjAxIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanM/MjFiNSIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzPzFkYjUiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzPzIyYzYiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanM/MmI5MSIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzPzFiZGQiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzP2M5ZDkiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanM/ZWQwNiIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcz80NTcwIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBjb25maWcsXG4gICAgY2FyZCxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgZGVsZXRlQ2FyZEZyb21TZXJ2ZXIsXG4gICAgdXNlcklkLFxuICAgIGhhbmRsZVVwZGF0ZUNhcmRMaWtlc1xuICApIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmQubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZC5saW5rO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9kZWxldGVDYXJkRnJvbVNlcnZlciA9IGRlbGV0ZUNhcmRGcm9tU2VydmVyO1xuICAgIHRoaXMuX2hhbmRsZVVwZGF0ZUNhcmRMaWtlcyA9IGhhbmRsZVVwZGF0ZUNhcmRMaWtlcztcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5fbGlrZXMgPSB0aGlzLl9jYXJkLmxpa2VzO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBsYWNlVGVtcGxhdGUpXG4gICAgICAuY29udGVudC5jaGlsZHJlblswXS5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdmlld1xuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNhcmREZWxldGVCdXR0b24pXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZCh0aGlzLl9jYXJkKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX3BsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVVcGRhdGVDYXJkTGlrZXModGhpcy5fY2FyZC5faWQsIHRoaXMuX2lzTGlrZWQoKSwgdGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9kZWxldGVDYXJkRnJvbVNlcnZlcih0aGlzLl9jYXJkLl9pZCwgdGhpcyk7XG4gIH1cblxuICBzdWJtaXREZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX3ZpZXcucmVtb3ZlKCk7XG4gICAgdGhpcy5fdmlldyA9IG51bGw7XG4gIH1cblxuICBfY2hlY2tPd25lcih0ZW1wbGF0ZSkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX2NhcmQub3duZXIuX2lkKSB7XG4gICAgICB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jYXJkRGVsZXRlQnV0dG9uKS5zdHlsZS5kaXNwbGF5ID1cbiAgICAgICAgXCJub25lXCI7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIF9pc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgfVxuXG4gIF91cGRhdGVMaWtlc1ZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXG4gICAgICB0aGlzLl9jb25maWcuY2FyZExpa2VBY3RpdmVDbGFzcyxcbiAgICAgIHRoaXMuX2lzTGlrZWQoKVxuICAgICk7XG4gIH1cblxuICB1cGRhdGVMaWtlcyhsaWtlcykge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX2xpa2VzKTtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX2xpa2VzKTtcbiAgICB0aGlzLl91cGRhdGVMaWtlc1ZpZXcoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLl92aWV3ID0gdGhpcy5fY2hlY2tPd25lcih0aGlzLl9nZXRUZW1wbGF0ZSgpKTtcbiAgICB0aGlzLl9wbGFjZU5hbWUgPSB0aGlzLl92aWV3LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNhcmROYW1lKTtcbiAgICB0aGlzLl9wbGFjZU5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3BsYWNlSW1hZ2UgPSB0aGlzLl92aWV3LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNhcmRJbWFnZSk7XG4gICAgdGhpcy5fcGxhY2VJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX3BsYWNlSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fdmlldy5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jYXJkTGlrZUJ1dHRvbik7XG4gICAgdGhpcy5fY2FyZExpa2VDb3VudCA9IHRoaXMuX3ZpZXcucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuY2FyZExpa2VzKTtcbiAgICB0aGlzLl91cGRhdGVMaWtlc1ZpZXcoKTtcbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dEVsZW1lbnQpXG4gICAgKTtcbiAgfVxuXG4gIF9hY3RpdmF0ZUVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2Rpc2FibGVFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9kZWFjdGl2YXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50KSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIF9hY3RpdmF0ZUJ1dHRvbigpIHtcbiAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9kZWFjdGl2YXRlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2Rpc2FibGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b25FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaXNPcGVuXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfaXNPcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVCdXR0b25DbGljaygpIHtcbiAgICBpZiAodGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX2lzT3BlblwiKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQnV0dG9uQ2xpY2soKTtcbiAgICB9KTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9pc09wZW5cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19wbGFjZS1pbWFnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1uYW1lXCIpO1xuICB9XG4gIG9wZW4ocGxhY2VOYW1lLCBwbGFjZUxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBwbGFjZUxpbmspO1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gcGxhY2VOYW1lO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgcGxhY2VOYW1lKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgaGFuZGxlUmVuZGVyTG9hZGluZykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2hhbmRsZVJlbmRlckxvYWRpbmcgPSBoYW5kbGVSZW5kZXJMb2FkaW5nO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVMb2FkZXIoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19zdWJtaXQtYnV0dG9uX2FkZFwiKSkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7Qt9C00LDRgtGMXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC40YLRjFwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybURlbGV0ZSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1EZWxldGUgPSBoYW5kbGVGb3JtRGVsZXRlO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCJcbiAgICApO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybURlbGV0ZSh0aGlzLl9nZXRDYXJkRGF0YSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oaWQsIGNhcmQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FyZERhdGEgPSB7fTtcbiAgICB0aGlzLl9jYXJkRGF0YS5pZCA9IGlkO1xuICAgIHRoaXMuX2NhcmREYXRhLmNhcmQgPSBjYXJkO1xuICB9XG5cbiAgX2dldENhcmREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9jYXJkRGF0YTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhTdWJtaXQ7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgdGhpcy5faWQ7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHt9O1xuICAgIHVzZXJEYXRhLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgIHVzZXJEYXRhLmFib3V0ID0gdGhpcy5fYWJvdXQudGV4dENvbnRlbnQ7XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJleHBvcnQgY29uc3QgYnRuRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0U2VsZWN0b3IgPSBcIiNwb3B1cF9lZGl0XCI7XG5cbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZVNlbGVjdG9yID0gXCIjcG9wdXBfZGVsZXRlXCI7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhclNlbGVjdG9yID0gXCIjcG9wdXBfYXZhdGFyXCI7XG5leHBvcnQgY29uc3QgYnRuQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybV9hdmF0YXJcIik7XG5cbmV4cG9ydCBjb25zdCBuYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBhYm91dFNlbGVjdG9yID0gXCIucHJvZmlsZV9fYWJvdXRcIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2F2YXRhclwiO1xuZXhwb3J0IGNvbnN0IGFib3V0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9hYm91dFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybV9lZGl0XCIpO1xuXG5leHBvcnQgY29uc3QgYnRuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkU2VsZWN0b3IgPSBcIiNwb3B1cF9hZGRcIjtcbmV4cG9ydCBjb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZU5hbWVJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfcGxhY2VcIlxuKTtcbmV4cG9ydCBjb25zdCBwbGFjZUltZ0xpbmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfbGlua1wiKTtcbmV4cG9ydCBjb25zdCBwbGFjZVBvcHVwU2VsZWN0b3IgPSBcIiNwb3B1cF9wbGFjZVwiO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBwbGFjZVRlbXBsYXRlOiBcIi5wbGFjZS10ZW1wbGF0ZVwiLFxuICBjYXJkTmFtZTogXCIucGxhY2VfX25hbWVcIixcbiAgY2FyZEltYWdlOiBcIi5wbGFjZV9faW1hZ2VcIixcbiAgY2FyZExpa2VzOiBcIi5wbGFjZV9fbGlrZS1jb3VudFwiLFxuICBjYXJkTGlzdDogXCIuZWxlbWVudHNcIixcbiAgY2FyZERlbGV0ZUJ1dHRvbjogXCIucGxhY2VfX2RlbGV0ZS1idXR0b25cIixcbiAgY2FyZExpa2VCdXR0b246IFwiLnBsYWNlX19saWtlLWJ1dHRvblwiLFxuICBjYXJkTGlrZUFjdGl2ZUNsYXNzOiBcInBsYWNlX19saWtlLWJ1dHRvbl9hY3RpdmVcIixcbiAgaG9zdDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ3XCIsXG4gIHRva2VuOiBcImFkNWE0ZmU5LTYyNDktNDkwMC05NzU3LTM5ZmQyOTg4NjZlY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb24gPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGhvc3QsIHRva2VuKSB7XG4gICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcblxuICAgIHRoaXMuX2dldEpzb25PckVycm9yID0gdGhpcy5fZ2V0SnNvbk9yRXJyb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9nZXRIZWFkZXJzID0gdGhpcy5fZ2V0SGVhZGVycy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2dldEpzb25PckVycm9yKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgX2dldEhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgfVxuXG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb25PckVycm9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvRnJvbVNlcnZlcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXG4gICAgfSkudGhlbih0aGlzLl9nZXRKc29uT3JFcnJvcik7XG4gIH1cblxuICBjcmVhdGVDYXJkKGNhcmQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb25PckVycm9yKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb25PckVycm9yKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJBdmF0YXIobGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9nZXRKc29uT3JFcnJvcik7XG4gIH1cblxuICBzZXRMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2hvc3R9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpO1xuICB9XG5cbiAgZGVsZXRlTGlrZShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb25PckVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJpbXBvcnQgXCIuLy4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQge1xuICBidG5FZGl0LFxuICBwb3B1cEVkaXRTZWxlY3RvcixcbiAgbmFtZVNlbGVjdG9yLFxuICBuYW1lSW5wdXQsXG4gIGFib3V0U2VsZWN0b3IsXG4gIGF2YXRhclNlbGVjdG9yLFxuICBhYm91dElucHV0LFxuICBmb3JtRWRpdCxcbiAgYnRuQWRkLFxuICBwb3B1cEFkZFNlbGVjdG9yLFxuICBmb3JtQWRkLFxuICBwbGFjZVBvcHVwU2VsZWN0b3IsXG4gIGNvbmZpZyxcbiAgdmFsaWRhdGlvbixcbiAgcG9wdXBEZWxldGVTZWxlY3RvcixcbiAgcG9wdXBBdmF0YXJTZWxlY3RvcixcbiAgYnRuQXZhdGFyLFxuICBmb3JtQXZhdGFyLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5sZXQgdXNlcklkO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKGNvbmZpZy5ob3N0LCBjb25maWcudG9rZW4pO1xuXG5mdW5jdGlvbiBoYW5kbGVyRm9ybUVkaXRTdWJtaXQoaW5wdXRzKSB7XG4gIHBvcHVwRWRpdC50b2dnbGVMb2FkZXIodHJ1ZSk7XG5cbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKGlucHV0cylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBwb3B1cEVkaXQuY2xvc2UoKSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXQudG9nZ2xlTG9hZGVyKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuY29uc3QgaGFuZGxlclBsYWNlU3VibWl0ID0gKGlucHV0cykgPT4ge1xuICBwb3B1cEFkZC50b2dnbGVMb2FkZXIodHJ1ZSk7XG4gIGFwaVxuICAgIC5jcmVhdGVDYXJkKGlucHV0cylcbiAgICAudGhlbigoaXRlbSkgPT4ge1xuICAgICAgcmVuZGVyQ2FyZChpdGVtKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEFkZC50b2dnbGVMb2FkZXIoZmFsc2UpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KGlucHV0cykge1xuICBwb3B1cEF2YXRhci50b2dnbGVMb2FkZXIodHJ1ZSk7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VyQXZhdGFyKGlucHV0cy5saW5rKVxuICAgIC50aGVuKChhdmF0YXIpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGF2YXRhcik7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXIudG9nZ2xlTG9hZGVyKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IG5hbWVTZWxlY3RvcixcbiAgYWJvdXRTZWxlY3RvcjogYWJvdXRTZWxlY3RvcixcbiAgYXZhdGFyU2VsZWN0b3I6IGF2YXRhclNlbGVjdG9yLFxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1EZWxldGUoY2FyZERhdGEpIHtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoY2FyZERhdGEuaWQpXG4gICAgLnRoZW4oY2FyZERhdGEuY2FyZC5zdWJtaXREZWxldGVDYXJkKCkpXG4gICAgLnRoZW4ocG9wdXBTdWJtaXQuY2xvc2UoKSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5EZWxldGVQb3B1cChpZCwgY2FyZCkge1xuICBwb3B1cFN1Ym1pdC5vcGVuKGlkLCBjYXJkKTtcbn1cblxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKHBsYWNlTmFtZSwgcGxhY2VMaW5rKSA9PiB7XG4gIHBsYWNlUG9wdXAub3BlbihwbGFjZU5hbWUsIHBsYWNlTGluayk7XG59O1xuXG5mdW5jdGlvbiBoYW5kbGVVcGRhdGVDYXJkTGlrZXMoaWQsIGlzTGlrZWQsIGNhcmQpIHtcbiAgaWYgKCFpc0xpa2VkKSB7XG4gICAgYXBpLnNldExpa2UoaWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaS5kZWxldGVMaWtlKGlkKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgcGxhY2UgPSBuZXcgQ2FyZChcbiAgICBjb25maWcsXG4gICAgaXRlbSxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgb3BlbkRlbGV0ZVBvcHVwLFxuICAgIHVzZXJJZCxcbiAgICBoYW5kbGVVcGRhdGVDYXJkTGlrZXNcbiAgKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBwbGFjZS5yZW5kZXIoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5jb25zdCByZW5kZXJDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn07XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgfSxcbiAgY29uZmlnLmNhcmRMaXN0XG4pO1xuXG5idG5FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHBvcHVwRWRpdC5vcGVuKCk7XG5cbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBhYm91dElucHV0LnZhbHVlID0gdXNlckRhdGEuYWJvdXQ7XG4gIGZvcm1FZGl0VmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5idG5BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcG9wdXBBZGQub3BlbigpO1xuICBmb3JtQWRkVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5idG5BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xuICBmb3JtQXZhdGFyVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCBwb3B1cFN1Ym1pdCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQocG9wdXBEZWxldGVTZWxlY3RvciwgaGFuZGxlRm9ybURlbGV0ZSk7XG5wb3B1cFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQXZhdGFyU2VsZWN0b3IsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRTZWxlY3RvciwgaGFuZGxlckZvcm1FZGl0U3VibWl0KTtcbnBvcHVwRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZFNlbGVjdG9yLCBoYW5kbGVyUGxhY2VTdWJtaXQpO1xucG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZm9ybUVkaXRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbiwgZm9ybUVkaXQpO1xuZm9ybUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGZvcm1BZGRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbiwgZm9ybUFkZCk7XG5mb3JtQWRkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb24sIGZvcm1BdmF0YXIpO1xuZm9ybUF2YXRhclZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBsYWNlUG9wdXBTZWxlY3Rvcik7XG5wbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm9Gcm9tU2VydmVyKCksIGFwaS5nZXRDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyLCBjYXJkc10pID0+IHtcbiAgICB1c2VySWQgPSB1c2VyLl9pZDtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyKTtcblxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///174\n')}},__webpack_exports__={};__webpack_modules__[174]()})();